<!DOCTYPE html>
<html>

<head>
    <title>測驗</title>
    <style>
        button {
            font-size: 25px;
            margin-right: 10px;
        }

        p {
            font-size: 25px;
            display: inline-block;
            margin-right: 10px;
        }

        img {
            height: 200px;
            display: block;
            margin-top: 50px;
        }
    </style>
</head>

<body>

    <button onclick='
        cart.productNum = 0;
        cart.product1.num = 0;
        cart.product2.num = 0;
        cart.total = 0;
        console.log("購物車已清空");
        showCart();
        localStorage.removeItem("cart");
    '>清空購物車</button>

    <img src="image/product_image1.jpg">
    <p>$100</p>
    <button onclick='
        cart.product1.num ++;
        cart.productNum ++;
        cart.total += 100;
        saveCart();
        showCart();
    '>加入購物車</button>

    <img src="image/product_image2.jpg">
    <p>$200</p>
    <button onclick='
        cart.product2.num ++;
        cart.productNum ++;
        cart.total += 200;
        saveCart();
        showCart();
    '>加入購物車</button></br>

    <p class="cart">
       

    </p>

    <script>
        //localstorage.getItem取得的是JSON字串 用JSON.parse轉換成JS物件
        //JS物件裁示網頁看得懂的語言
        let cart = JSON.parse(localStorage.getItem("cart"));

        if (cart === null) {
            cart = {
                productNum: 0,
                product1: {
                    num: 0,
                    name: "海底撈泡麵",
                    price: 100
                },
                product2: {
                    num: 0,
                    name: "氧氣人生",
                    price: 200
                },
                total: 0
            };
        }
        function showCart() {
            document.querySelector(".cart").innerHTML = `
            購物車目前商品數: ${cart.productNum}</br>
            ${cart.product1.name} : ${cart.product1.num}</br>
            ${cart.product2.name} : ${cart.product2.num}</br>
            購物車目前金額 : ${cart.total}
            `;
            
        }

        function saveCart() {
            const jsonCart = JSON.stringify(cart);
            localStorage.setItem("cart", jsonCart);
        }

        showCart();
      

        //localStrorage將資料存在網頁
        //JSON將JS物件轉換成可以存在網頁的字串 或將JSON字串轉換JS物件

        //localStorage.setItem儲存資料
        //localStorage.getItem取得資料
        //localStorage.removeItem刪除資料
        //

    </script>
</body>

</html>